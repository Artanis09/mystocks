# 마이스탁 데이터 매뉴얼 (KRX Stock Data Manual)

이 프로젝트는 한국 주식 시장(KRX)의 전 종목 일봉 데이터를 수집하고 관리합니다.

## 1. 데이터 개요
- **수집 대상**: KOSPI, KOSDAQ 전 종목
- **수집 기간**: 2000년 01월 04일 ~ 현재 (영업일 기준)
- **수집 주기**: 일 1회 (장 마감 후)
- **데이터 출처**: 
  - 과거 데이터 (2000~2024): 아카이브 CSV (KR Stock Market 2000-2024)
  - 최근 데이터 (2024~현재): 한국투자증권(KIS) API

## 2. 디렉토리 구조
데이터는 `data/krx/` 경로에 저장되며, 날짜별로 파티셔닝되어 관리됩니다.

```text
data/krx/
├── bars/                       # 일봉 시세 데이터
│   ├── date=YYYY-MM-DD/        # 날짜별 파티션 폴더
│   │   └── part-0000.parquet   # 해당 일자의 전 종목 시세 (Apache Parquet)
├── master/
│   └── tickers.parquet         # 전 종목 마스터 정보 (코드, 이름, 시장구분)
└── financials/                 # DART 재무 제표 데이터 (연도/분기별)
```

## 3. 데이터 스키마 (Bars)
각 Parquet 파일은 다음과 같은 컬럼을 포함합니다:

| 컬럼명 | 설명 | 데이터 타입 | 예시 |
| :--- | :--- | :--- | :--- |
| `date` | 영업일 | datetime64[ns] | 2026-01-02 |
| `code` | 종목코드 (6자리) | object | 005930 |
| `market` | 소속 시장 | object | KOSPI / KOSDAQ |
| `open` | 시초가 | float64 | 120200.0 |
| `high` | 고가 | float64 | 126300.0 |
| `low` | 저가 | float64 | 120200.0 |
| `close` | 종가 | float64 | 126300.0 |
| `volume` | 거래량 | float64 | 19701193.0 |
| `value` | 거래대금 | float64 | 2436038748750.0 |

## 4. 데이터 사용 방법 (Python 예시)

```python
import pandas as pd

# 특정 날짜의 데이터 읽기
df = pd.read_parquet("data/krx/bars/date=2026-01-02/part-0000.parquet")

# 특정 종목(삼성전자)의 데이터 필터링
samsung = df[df['code'] == '005930']
print(samsung)
```

## 5. 기간별 샘플 데이터 (삼성전자, 005930)

| 기준일 | 시초가 | 고가 | 저가 | 종가 | 거래량 | 거래대금 |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: |
| **2000-01-04** (과거) | 6,000 | 6,110 | 5,660 | 6,110 | 74,195,000 | 453,331,450,000 |
| **2024-01-02** (중간) | 78,200 | 79,800 | 78,200 | 79,600 | 17,142,847 | 1,364,570,621,200 |
| **2026-01-02** (최근) | 120,200 | 126,300 | 120,200 | 126,300 | 19,701,193 | 2,436,038,748,750 |
